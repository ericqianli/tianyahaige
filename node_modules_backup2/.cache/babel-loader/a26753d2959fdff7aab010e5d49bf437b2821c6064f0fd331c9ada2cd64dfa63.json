{"ast":null,"code":"import{SUBTITLE_CHARACTERS_PER_LINE,SUBTITLE_NO_WRAP_LIMIT}from\"../constant/Constants\";export function getFormattedSubtitle(title,subtitle){const englishRegex=/^[A-Za-z0-9]/;if(englishRegex.test(subtitle)){return subtitle.split(\"\\r\\n\");}let len=subtitle.length;if(title!==\"\"&&len<=SUBTITLE_NO_WRAP_LIMIT){return[subtitle];}let remaining=SUBTITLE_CHARACTERS_PER_LINE*2;if(title!==\"\"){remaining-=(title.length*2+5)*2;}while(len>remaining){len-=remaining;remaining=SUBTITLE_CHARACTERS_PER_LINE*2;}const tailLength=len>>>1;return[subtitle.slice(0,-tailLength),subtitle.slice(-tailLength)];}","map":{"version":3,"names":["SUBTITLE_CHARACTERS_PER_LINE","SUBTITLE_NO_WRAP_LIMIT","getFormattedSubtitle","title","subtitle","englishRegex","test","split","len","length","remaining","tailLength","slice"],"sources":["/Users/liqian/projects/tianyahaige/src/manager/FormatManager.ts"],"sourcesContent":["import {\n    SUBTITLE_CHARACTERS_PER_LINE,\n    SUBTITLE_NO_WRAP_LIMIT,\n} from \"../constant/Constants\";\n\nexport function getFormattedSubtitle(title: string, subtitle: string) {\n    const englishRegex = /^[A-Za-z0-9]/;\n    if (englishRegex.test(subtitle)) {\n        return subtitle.split(\"\\r\\n\");\n    }\n\n    let len = subtitle.length;\n\n    if (title !== \"\" && len <= SUBTITLE_NO_WRAP_LIMIT) {\n        return [subtitle];\n    }\n\n    let remaining = SUBTITLE_CHARACTERS_PER_LINE * 2;\n    if (title !== \"\") {\n        remaining -= (title.length * 2 + 5) * 2;\n    }\n\n    while (len > remaining) {\n        len -= remaining;\n        remaining = SUBTITLE_CHARACTERS_PER_LINE * 2;\n    }\n\n    const tailLength = len >>> 1;\n\n    return [subtitle.slice(0, -tailLength), subtitle.slice(-tailLength)];\n}\n"],"mappings":"AAAA,OACIA,4BAA4B,CAC5BC,sBAAsB,KACnB,uBAAuB,CAE9B,MAAO,SAAS,CAAAC,oBAAoBA,CAACC,KAAa,CAAEC,QAAgB,CAAE,CAClE,KAAM,CAAAC,YAAY,CAAG,cAAc,CACnC,GAAIA,YAAY,CAACC,IAAI,CAACF,QAAQ,CAAC,CAAE,CAC7B,MAAO,CAAAA,QAAQ,CAACG,KAAK,CAAC,MAAM,CAAC,CACjC,CAEA,GAAI,CAAAC,GAAG,CAAGJ,QAAQ,CAACK,MAAM,CAEzB,GAAIN,KAAK,GAAK,EAAE,EAAIK,GAAG,EAAIP,sBAAsB,CAAE,CAC/C,MAAO,CAACG,QAAQ,CAAC,CACrB,CAEA,GAAI,CAAAM,SAAS,CAAGV,4BAA4B,CAAG,CAAC,CAChD,GAAIG,KAAK,GAAK,EAAE,CAAE,CACdO,SAAS,EAAI,CAACP,KAAK,CAACM,MAAM,CAAG,CAAC,CAAG,CAAC,EAAI,CAAC,CAC3C,CAEA,MAAOD,GAAG,CAAGE,SAAS,CAAE,CACpBF,GAAG,EAAIE,SAAS,CAChBA,SAAS,CAAGV,4BAA4B,CAAG,CAAC,CAChD,CAEA,KAAM,CAAAW,UAAU,CAAGH,GAAG,GAAK,CAAC,CAE5B,MAAO,CAACJ,QAAQ,CAACQ,KAAK,CAAC,CAAC,CAAE,CAACD,UAAU,CAAC,CAAEP,QAAQ,CAACQ,KAAK,CAAC,CAACD,UAAU,CAAC,CAAC,CACxE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}