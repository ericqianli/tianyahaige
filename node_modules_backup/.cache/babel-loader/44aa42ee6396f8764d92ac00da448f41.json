{"ast":null,"code":"var _jsxFileName = \"/Users/liqian/projects/tianyahaige/src/component/Content.tsx\";\nimport clsx from \"clsx\";\nimport React from \"react\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport { createStyles, withStyles, withTheme } from \"@material-ui/core\";\nimport { BACKGROUND_ADJUSTED_SIZE_BY_WIDTH, BACKGROUND_SIZE_BY_HEIGHT, BACKGROUND_SIZE_BY_WIDTH, COLUMN_WIDTH, COLUMN_WIDTH_IN_REM, COLUMNS_PER_BACKGROUD, CONTENT_HEIGHT, HALF_COLUMN_WIDTH, ROUTE_INFO_MAP } from \"../constant/Constants\";\nimport BackgroundBodyDark from \"../image/background_body_2x_dark.png\";\nimport BackgroundBodyLight from \"../image/background_body_2x_light.png\";\nimport BackgroundLeftDark from \"../image/background_left_2x_dark.png\";\nimport BackgroundLeftLight from \"../image/background_left_2x_light.png\";\nimport BackgroundRightDark from \"../image/background_right_2x_dark.png\";\nimport BackgroundRightLight from \"../image/background_right_2x_light.png\";\nimport { getFormattedSubtitle } from \"../manager/FormatManager\";\nconst styles = theme => createStyles({\n  \"@keyframes fadeOut\": {\n    \"0%\": {\n      opacity: 1\n    },\n    \"40%\": {\n      opacity: 1\n    },\n    \"100%\": {\n      opacity: 0\n    }\n  },\n  \"@keyframes fadeIn\": {\n    \"0%\": {\n      opacity: 0\n    },\n    \"100%\": {\n      opacity: 1\n    }\n  },\n  container: {\n    height: CONTENT_HEIGHT,\n    overflowX: \"scroll\",\n    overflowY: \"hidden\",\n    writingMode: \"vertical-rl\",\n    // To style scrollbar thumb with transition\n    // backgroundColor: \"rgba(0,0,0,0)\",\n    // WebkitBackgroundClip: \"text\",\n    // backgroundClip: \"text\",\n    // transition: \"background-color 500ms ease-in-out\",\n\n    \"&::-webkit-scrollbar\": {\n      height: \"1rem\"\n    },\n    \"&::-webkit-scrollbar-track\": {\n      background: \"transparent\"\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      border: \".25rem solid rgba(0, 0, 0, 0)\",\n      borderRadius: \".5rem\",\n      backgroundClip: \"padding-box\",\n      backgroundColor: \"transparent\"\n      // backgroundColor: \"inherit\",\n    },\n    \"&:hover::-webkit-scrollbar-thumb\": {\n      backgroundColor: theme.palette.type === \"light\" ? \"rgba(0, 0, 0, .25)\" : \"rgba(255, 255, 255, .25)\"\n    }\n    // \"&:hover\": {\n    //     backgroundColor:\n    //         theme.palette.type === \"light\"\n    //             ? \"rgba(0, 0, 0, .25)\"\n    //             : \"rgba(255, 255, 255, .25)\",\n    // },\n  },\n  title: {\n    height: CONTENT_HEIGHT,\n    width: \"32rem\",\n    backgroundSize: BACKGROUND_SIZE_BY_HEIGHT,\n    backgroundPosition: \"center\"\n  },\n  fadeOutAnimation: {\n    animationName: \"$fadeOut\",\n    animationDuration: \"2s\",\n    animationTimingFunction: \"ease-in-out\",\n    animationIterationCount: 1\n  },\n  fadeInAnimation: {\n    animationName: \"$fadeIn\",\n    animationDuration: \"2s\",\n    animationTimingFunction: \"ease-in-out\",\n    animationIterationCount: 1\n  },\n  bookContent: {\n    height: CONTENT_HEIGHT,\n    backgroundImage: theme.palette.type === \"light\" ? `url(${BackgroundBodyLight})` : `url(${BackgroundBodyDark})`,\n    backgroundSize: BACKGROUND_SIZE_BY_WIDTH,\n    backgroundPosition: \"right\",\n    [theme.breakpoints.between(\"sm\", \"md\")]: {\n      backgroundSize: BACKGROUND_ADJUSTED_SIZE_BY_WIDTH\n    }\n  },\n  bookRightSide: {\n    height: CONTENT_HEIGHT,\n    width: \"5rem\",\n    backgroundImage: theme.palette.type === \"light\" ? `url(${BackgroundRightLight})` : `url(${BackgroundRightDark})`,\n    backgroundSize: BACKGROUND_SIZE_BY_HEIGHT,\n    backgroundPosition: \"left\",\n    backgroundRepeat: \"no-repeat\"\n  },\n  bookLeftSide: {\n    height: CONTENT_HEIGHT,\n    width: \"5rem\",\n    backgroundImage: theme.palette.type === \"light\" ? `url(${BackgroundLeftLight})` : `url(${BackgroundLeftDark})`,\n    backgroundSize: BACKGROUND_SIZE_BY_HEIGHT,\n    backgroundPosition: \"right\",\n    backgroundRepeat: \"no-repeat\"\n  },\n  poemContent: {\n    fontSize: \"2rem\",\n    height: \"40rem\",\n    margin: \"2rem 0\",\n    width: \"fit-content\",\n    lineHeight: COLUMN_WIDTH,\n    textAlign: \"start\",\n    writingMode: \"vertical-rl\",\n    // color: \"black\",\n    position: \"relative\",\n    right: \"-1.1rem\",\n    top: \"-0.1rem\",\n    \"& .header\": {\n      fontSize: \"1rem\",\n      lineHeight: HALF_COLUMN_WIDTH\n    },\n    \"& .title\": {\n      fontSize: \"2rem\",\n      lineHeight: COLUMN_WIDTH,\n      float: \"left\",\n      marginTop: \"4rem\",\n      marginBottom: \"1rem\"\n    },\n    \"& .subtitle\": {\n      verticalAlign: \"top\",\n      display: \"block\"\n    },\n    \"& .body\": {\n      clear: \"both\"\n    },\n    \"& .period\": {\n      marginTop: 0,\n      marginBottom: \"-0.75rem\",\n      fontSize: \"0.75rem\",\n      lineHeight: HALF_COLUMN_WIDTH,\n      position: \"relative\",\n      top: \"-0.2rem\",\n      left: \"0.75rem\",\n      display: \"inline-block\"\n      // display: \"none\",\n    }\n  }\n});\nfunction PageContent({\n  page\n}) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, page.map((line, index) => /*#__PURE__*/React.createElement(LineContent, {\n    key: index,\n    line: line,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  })));\n}\nfunction LineContent({\n  line\n}) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PoemHeader, {\n    key: \"header\",\n    title: line.title,\n    subtitle: line.subtitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }), line.body.split(\"\\r\\n\").map((body, index) => /*#__PURE__*/React.createElement(PoemBody, {\n    key: index,\n    body: body,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }\n  })));\n}\nfunction PoemHeader({\n  title,\n  subtitle\n}) {\n  const subtitleParts = getFormattedSubtitle(title, subtitle);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    key: \"title\",\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, title), subtitleParts.map((subtitle, index) => /*#__PURE__*/React.createElement(\"span\", {\n    key: `subtitle_${index}`,\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }\n  }, subtitle)));\n}\nfunction PoemBody({\n  body\n}) {\n  const linesOfPoem = body.split(\"︒\").filter(line => line !== \"\");\n  const compoments = [];\n  for (const index in linesOfPoem) {\n    compoments.push(linesOfPoem[index], /*#__PURE__*/React.createElement(Period, {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 45\n      }\n    }));\n  }\n  if (!body.endsWith(\"︒\")) {\n    compoments.pop();\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 12\n    }\n  }, compoments);\n}\nfunction Period() {\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: \"period\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 12\n    }\n  }, \"\\uFE12\");\n}\nfunction getRootFontSize() {\n  const rootFontSize = window.getComputedStyle(document.body).getPropertyValue(\"font-size\");\n  const rootFontSizeInPixel = Number(rootFontSize.slice(0, -2));\n  return rootFontSizeInPixel;\n}\nclass Content extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fadeTimeout = void 0;\n    this.state = {\n      stage: 0\n    };\n  }\n  componentDidMount() {\n    const collection = ROUTE_INFO_MAP[this.props.path].collection;\n    this.props.fetchContent(collection, this.props.sampled);\n    this.fadeTimeout = undefined;\n    this.setState({\n      stage: 1\n    });\n  }\n  render() {\n    const {\n      classes,\n      poems,\n      pages,\n      path\n    } = this.props;\n    const themePaletteType = this.props.theme.palette.type;\n    if (poems.length === 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: path,\n        className: classes.title,\n        style: {\n          backgroundImage: themePaletteType === \"light\" ? `url(${ROUTE_INFO_MAP[path].backgroundLight})` : `url(${ROUTE_INFO_MAP[path].backgroundDark})`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 17\n        }\n      });\n    }\n\n    // poems content non empty\n    if (this.state.stage === 1) {\n      if (this.fadeTimeout === undefined) {\n        this.fadeTimeout = setTimeout(() => {\n          this.fadeTimeout && clearTimeout(this.fadeTimeout);\n          this.fadeTimeout = undefined;\n          this.setState({\n            stage: 2\n          });\n        }, 2000);\n      }\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: path,\n        className: clsx(classes.title, classes.fadeOutAnimation),\n        style: {\n          backgroundImage: themePaletteType === \"light\" ? `url(${ROUTE_INFO_MAP[path].backgroundLight})` : `url(${ROUTE_INFO_MAP[path].backgroundDark})`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 17\n        }\n      });\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx(classes.container, classes.fadeInAnimation),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.bookRightSide,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.bookContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ReactResizeDetector, {\n      handleWidth: true,\n      handleHeight: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 21\n      }\n    }, ({\n      width\n    }) => {\n      const rootFontSizeInPixel = getRootFontSize();\n      const columnWidthInPixel = Math.floor(rootFontSizeInPixel * COLUMN_WIDTH_IN_REM);\n      const backgroundWidthInPixel = columnWidthInPixel * COLUMNS_PER_BACKGROUD;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, pages.map((page, index) => /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        className: classes.poemContent,\n        style: {\n          width: `${backgroundWidthInPixel}px`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(PageContent, {\n        page: page,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 45\n        }\n      }))));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.bookLeftSide,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 17\n      }\n    }));\n  }\n}\nexport default withTheme(withStyles(styles)(Content));","map":{"version":3,"names":["clsx","React","ReactResizeDetector","createStyles","withStyles","withTheme","BACKGROUND_ADJUSTED_SIZE_BY_WIDTH","BACKGROUND_SIZE_BY_HEIGHT","BACKGROUND_SIZE_BY_WIDTH","COLUMN_WIDTH","COLUMN_WIDTH_IN_REM","COLUMNS_PER_BACKGROUD","CONTENT_HEIGHT","HALF_COLUMN_WIDTH","ROUTE_INFO_MAP","BackgroundBodyDark","BackgroundBodyLight","BackgroundLeftDark","BackgroundLeftLight","BackgroundRightDark","BackgroundRightLight","getFormattedSubtitle","styles","theme","opacity","container","height","overflowX","overflowY","writingMode","background","border","borderRadius","backgroundClip","backgroundColor","palette","type","title","width","backgroundSize","backgroundPosition","fadeOutAnimation","animationName","animationDuration","animationTimingFunction","animationIterationCount","fadeInAnimation","bookContent","backgroundImage","breakpoints","between","bookRightSide","backgroundRepeat","bookLeftSide","poemContent","fontSize","margin","lineHeight","textAlign","position","right","top","float","marginTop","marginBottom","verticalAlign","display","clear","left","PageContent","page","createElement","Fragment","map","line","index","LineContent","key","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","PoemHeader","subtitle","body","split","PoemBody","subtitleParts","className","linesOfPoem","filter","compoments","push","Period","endsWith","pop","getRootFontSize","rootFontSize","window","getComputedStyle","document","getPropertyValue","rootFontSizeInPixel","Number","slice","Content","Component","constructor","props","fadeTimeout","state","stage","componentDidMount","collection","path","fetchContent","sampled","undefined","setState","render","classes","poems","pages","themePaletteType","length","style","backgroundLight","backgroundDark","setTimeout","clearTimeout","handleWidth","handleHeight","columnWidthInPixel","Math","floor","backgroundWidthInPixel"],"sources":["/Users/liqian/projects/tianyahaige/src/component/Content.tsx"],"sourcesContent":["import clsx from \"clsx\";\nimport React from \"react\";\nimport ReactResizeDetector from \"react-resize-detector\";\n\nimport {\n    createStyles,\n    Theme,\n    WithStyles,\n    withStyles,\n    withTheme,\n    WithTheme,\n} from \"@material-ui/core\";\n\nimport {\n    BACKGROUND_ADJUSTED_SIZE_BY_WIDTH,\n    BACKGROUND_SIZE_BY_HEIGHT,\n    BACKGROUND_SIZE_BY_WIDTH,\n    COLUMN_WIDTH,\n    COLUMN_WIDTH_IN_REM,\n    COLUMNS_PER_BACKGROUD,\n    CONTENT_HEIGHT,\n    HALF_COLUMN_WIDTH,\n    ROUTE_INFO_MAP,\n} from \"../constant/Constants\";\nimport BackgroundBodyDark from \"../image/background_body_2x_dark.png\";\nimport BackgroundBodyLight from \"../image/background_body_2x_light.png\";\nimport BackgroundLeftDark from \"../image/background_left_2x_dark.png\";\nimport BackgroundLeftLight from \"../image/background_left_2x_light.png\";\nimport BackgroundRightDark from \"../image/background_right_2x_dark.png\";\nimport BackgroundRightLight from \"../image/background_right_2x_light.png\";\nimport { getFormattedSubtitle } from \"../manager/FormatManager\";\nimport { Line, Page, Poem } from \"../type/Types\";\n\nconst styles = (theme: Theme) =>\n    createStyles({\n        \"@keyframes fadeOut\": {\n            \"0%\": {\n                opacity: 1,\n            },\n            \"40%\": {\n                opacity: 1,\n            },\n            \"100%\": {\n                opacity: 0,\n            },\n        },\n        \"@keyframes fadeIn\": {\n            \"0%\": {\n                opacity: 0,\n            },\n            \"100%\": {\n                opacity: 1,\n            },\n        },\n        container: {\n            height: CONTENT_HEIGHT,\n            overflowX: \"scroll\",\n            overflowY: \"hidden\",\n            writingMode: \"vertical-rl\",\n\n            // To style scrollbar thumb with transition\n            // backgroundColor: \"rgba(0,0,0,0)\",\n            // WebkitBackgroundClip: \"text\",\n            // backgroundClip: \"text\",\n            // transition: \"background-color 500ms ease-in-out\",\n\n            \"&::-webkit-scrollbar\": {\n                height: \"1rem\",\n            },\n            \"&::-webkit-scrollbar-track\": {\n                background: \"transparent\",\n            },\n            \"&::-webkit-scrollbar-thumb\": {\n                border: \".25rem solid rgba(0, 0, 0, 0)\",\n                borderRadius: \".5rem\",\n                backgroundClip: \"padding-box\",\n                backgroundColor: \"transparent\",\n                // backgroundColor: \"inherit\",\n            },\n            \"&:hover::-webkit-scrollbar-thumb\": {\n                backgroundColor:\n                    theme.palette.type === \"light\"\n                        ? \"rgba(0, 0, 0, .25)\"\n                        : \"rgba(255, 255, 255, .25)\",\n            },\n            // \"&:hover\": {\n            //     backgroundColor:\n            //         theme.palette.type === \"light\"\n            //             ? \"rgba(0, 0, 0, .25)\"\n            //             : \"rgba(255, 255, 255, .25)\",\n            // },\n        },\n        title: {\n            height: CONTENT_HEIGHT,\n            width: \"32rem\",\n            backgroundSize: BACKGROUND_SIZE_BY_HEIGHT,\n            backgroundPosition: \"center\",\n        },\n        fadeOutAnimation: {\n            animationName: \"$fadeOut\",\n            animationDuration: \"2s\",\n            animationTimingFunction: \"ease-in-out\",\n            animationIterationCount: 1,\n        },\n        fadeInAnimation: {\n            animationName: \"$fadeIn\",\n            animationDuration: \"2s\",\n            animationTimingFunction: \"ease-in-out\",\n            animationIterationCount: 1,\n        },\n        bookContent: {\n            height: CONTENT_HEIGHT,\n            backgroundImage:\n                theme.palette.type === \"light\"\n                    ? `url(${BackgroundBodyLight})`\n                    : `url(${BackgroundBodyDark})`,\n            backgroundSize: BACKGROUND_SIZE_BY_WIDTH,\n            backgroundPosition: \"right\",\n            [theme.breakpoints.between(\"sm\", \"md\")]: {\n                backgroundSize: BACKGROUND_ADJUSTED_SIZE_BY_WIDTH,\n            },\n        },\n        bookRightSide: {\n            height: CONTENT_HEIGHT,\n            width: \"5rem\",\n            backgroundImage:\n                theme.palette.type === \"light\"\n                    ? `url(${BackgroundRightLight})`\n                    : `url(${BackgroundRightDark})`,\n            backgroundSize: BACKGROUND_SIZE_BY_HEIGHT,\n            backgroundPosition: \"left\",\n            backgroundRepeat: \"no-repeat\",\n        },\n        bookLeftSide: {\n            height: CONTENT_HEIGHT,\n            width: \"5rem\",\n            backgroundImage:\n                theme.palette.type === \"light\"\n                    ? `url(${BackgroundLeftLight})`\n                    : `url(${BackgroundLeftDark})`,\n            backgroundSize: BACKGROUND_SIZE_BY_HEIGHT,\n            backgroundPosition: \"right\",\n            backgroundRepeat: \"no-repeat\",\n        },\n        poemContent: {\n            fontSize: \"2rem\",\n            height: \"40rem\",\n            margin: \"2rem 0\",\n            width: \"fit-content\",\n            lineHeight: COLUMN_WIDTH,\n            textAlign: \"start\",\n            writingMode: \"vertical-rl\",\n            // color: \"black\",\n            position: \"relative\",\n            right: \"-1.1rem\",\n            top: \"-0.1rem\",\n            \"& .header\": {\n                fontSize: \"1rem\",\n                lineHeight: HALF_COLUMN_WIDTH,\n            },\n            \"& .title\": {\n                fontSize: \"2rem\",\n                lineHeight: COLUMN_WIDTH,\n                float: \"left\",\n                marginTop: \"4rem\",\n                marginBottom: \"1rem\",\n            },\n            \"& .subtitle\": {\n                verticalAlign: \"top\",\n                display: \"block\",\n            },\n            \"& .body\": {\n                clear: \"both\",\n            },\n            \"& .period\": {\n                marginTop: 0,\n                marginBottom: \"-0.75rem\",\n                fontSize: \"0.75rem\",\n                lineHeight: HALF_COLUMN_WIDTH,\n                position: \"relative\",\n                top: \"-0.2rem\",\n                left: \"0.75rem\",\n                display: \"inline-block\",\n                // display: \"none\",\n            },\n        },\n    });\n\nfunction PageContent({ page }: { page: Page }) {\n    return (\n        <>\n            {page.map((line, index) => (\n                <LineContent key={index} line={line} />\n            ))}\n        </>\n    );\n}\n\nfunction LineContent({ line }: { line: Line }) {\n    return (\n        <>\n            <PoemHeader\n                key=\"header\"\n                title={line.title}\n                subtitle={line.subtitle}\n            />\n            {line.body.split(\"\\r\\n\").map((body, index) => (\n                <PoemBody key={index} body={body} />\n            ))}\n        </>\n    );\n}\n\nfunction PoemHeader({ title, subtitle }: { title: string; subtitle: string }) {\n    const subtitleParts = getFormattedSubtitle(title, subtitle);\n    return (\n        <div className=\"header\">\n            <span key=\"title\" className=\"title\">\n                {title}\n            </span>\n            {subtitleParts.map((subtitle, index) => (\n                <span key={`subtitle_${index}`} className=\"subtitle\">\n                    {subtitle}\n                </span>\n            ))}\n        </div>\n    );\n}\n\nfunction PoemBody({ body }: { body: string }) {\n    const linesOfPoem = body.split(\"︒\").filter((line) => line !== \"\");\n    const compoments = [];\n\n    for (const index in linesOfPoem) {\n        compoments.push(linesOfPoem[index], <Period key={index} />);\n    }\n\n    if (!body.endsWith(\"︒\")) {\n        compoments.pop();\n    }\n\n    return <div className=\"body\">{compoments}</div>;\n}\n\nfunction Period() {\n    return <span className=\"period\">︒</span>;\n}\n\nfunction getRootFontSize() {\n    const rootFontSize = window\n        .getComputedStyle(document.body)\n        .getPropertyValue(\"font-size\");\n    const rootFontSizeInPixel = Number(rootFontSize.slice(0, -2));\n    return rootFontSizeInPixel;\n}\n\ninterface Props extends WithStyles<typeof styles>, WithTheme {\n    lines: Line[];\n    pages: Page[];\n    poems: Poem[];\n    path: string;\n    sampled: boolean;\n    fetchContent: (collection: number, sampled: boolean) => void;\n}\n\ninterface State {\n    stage: number;\n}\n\nclass Content extends React.Component<Props, State> {\n    fadeTimeout?: NodeJS.Timeout;\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            stage: 0,\n        };\n    }\n\n    componentDidMount() {\n        const collection = ROUTE_INFO_MAP[this.props.path].collection;\n        this.props.fetchContent(collection, this.props.sampled);\n        this.fadeTimeout = undefined;\n        this.setState({ stage: 1 });\n    }\n\n    render() {\n        const { classes, poems, pages, path } = this.props;\n\n        const themePaletteType = this.props.theme.palette.type;\n\n        if (poems.length === 0) {\n            return (\n                <div\n                    key={path}\n                    className={classes.title}\n                    style={{\n                        backgroundImage:\n                            themePaletteType === \"light\"\n                                ? `url(${ROUTE_INFO_MAP[path].backgroundLight})`\n                                : `url(${ROUTE_INFO_MAP[path].backgroundDark})`,\n                    }}\n                />\n            );\n        }\n\n        // poems content non empty\n        if (this.state.stage === 1) {\n            if (this.fadeTimeout === undefined) {\n                this.fadeTimeout = setTimeout(() => {\n                    this.fadeTimeout && clearTimeout(this.fadeTimeout);\n                    this.fadeTimeout = undefined;\n                    this.setState({ stage: 2 });\n                }, 2000);\n            }\n\n            return (\n                <div\n                    key={path}\n                    className={clsx(classes.title, classes.fadeOutAnimation)}\n                    style={{\n                        backgroundImage:\n                            themePaletteType === \"light\"\n                                ? `url(${ROUTE_INFO_MAP[path].backgroundLight})`\n                                : `url(${ROUTE_INFO_MAP[path].backgroundDark})`,\n                    }}\n                />\n            );\n        }\n\n        return (\n            <div className={clsx(classes.container, classes.fadeInAnimation)}>\n                <div className={classes.bookRightSide}></div>\n                <div className={classes.bookContent}>\n                    <ReactResizeDetector handleWidth handleHeight>\n                        {({ width }: { width: number }) => {\n                            const rootFontSizeInPixel = getRootFontSize();\n\n                            const columnWidthInPixel = Math.floor(\n                                rootFontSizeInPixel * COLUMN_WIDTH_IN_REM\n                            );\n\n                            const backgroundWidthInPixel =\n                                columnWidthInPixel * COLUMNS_PER_BACKGROUD;\n\n                            return (\n                                <>\n                                    {pages.map((page, index) => (\n                                        <div\n                                            key={index}\n                                            className={classes.poemContent}\n                                            style={{\n                                                width: `${backgroundWidthInPixel}px`,\n                                            }}\n                                        >\n                                            <PageContent page={page} />\n                                        </div>\n                                    ))}\n                                </>\n                            );\n                        }}\n                    </ReactResizeDetector>\n                </div>\n                <div className={classes.bookLeftSide}></div>\n            </div>\n        );\n    }\n}\n\nexport default withTheme(withStyles(styles)(Content));\n"],"mappings":";AAAA,OAAOA,IAAI,MAAM,MAAM;AACvB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,mBAAmB,MAAM,uBAAuB;AAEvD,SACIC,YAAY,EAGZC,UAAU,EACVC,SAAS,QAEN,mBAAmB;AAE1B,SACIC,iCAAiC,EACjCC,yBAAyB,EACzBC,wBAAwB,EACxBC,YAAY,EACZC,mBAAmB,EACnBC,qBAAqB,EACrBC,cAAc,EACdC,iBAAiB,EACjBC,cAAc,QACX,uBAAuB;AAC9B,OAAOC,kBAAkB,MAAM,sCAAsC;AACrE,OAAOC,mBAAmB,MAAM,uCAAuC;AACvE,OAAOC,kBAAkB,MAAM,sCAAsC;AACrE,OAAOC,mBAAmB,MAAM,uCAAuC;AACvE,OAAOC,mBAAmB,MAAM,uCAAuC;AACvE,OAAOC,oBAAoB,MAAM,wCAAwC;AACzE,SAASC,oBAAoB,QAAQ,0BAA0B;AAG/D,MAAMC,MAAM,GAAIC,KAAY,IACxBpB,YAAY,CAAC;EACT,oBAAoB,EAAE;IAClB,IAAI,EAAE;MACFqB,OAAO,EAAE;IACb,CAAC;IACD,KAAK,EAAE;MACHA,OAAO,EAAE;IACb,CAAC;IACD,MAAM,EAAE;MACJA,OAAO,EAAE;IACb;EACJ,CAAC;EACD,mBAAmB,EAAE;IACjB,IAAI,EAAE;MACFA,OAAO,EAAE;IACb,CAAC;IACD,MAAM,EAAE;MACJA,OAAO,EAAE;IACb;EACJ,CAAC;EACDC,SAAS,EAAE;IACPC,MAAM,EAAEd,cAAc;IACtBe,SAAS,EAAE,QAAQ;IACnBC,SAAS,EAAE,QAAQ;IACnBC,WAAW,EAAE,aAAa;IAE1B;IACA;IACA;IACA;IACA;;IAEA,sBAAsB,EAAE;MACpBH,MAAM,EAAE;IACZ,CAAC;IACD,4BAA4B,EAAE;MAC1BI,UAAU,EAAE;IAChB,CAAC;IACD,4BAA4B,EAAE;MAC1BC,MAAM,EAAE,+BAA+B;MACvCC,YAAY,EAAE,OAAO;MACrBC,cAAc,EAAE,aAAa;MAC7BC,eAAe,EAAE;MACjB;IACJ,CAAC;IACD,kCAAkC,EAAE;MAChCA,eAAe,EACXX,KAAK,CAACY,OAAO,CAACC,IAAI,KAAK,OAAO,GACxB,oBAAoB,GACpB;IACd;IACA;IACA;IACA;IACA;IACA;IACA;EACJ,CAAC;EACDC,KAAK,EAAE;IACHX,MAAM,EAAEd,cAAc;IACtB0B,KAAK,EAAE,OAAO;IACdC,cAAc,EAAEhC,yBAAyB;IACzCiC,kBAAkB,EAAE;EACxB,CAAC;EACDC,gBAAgB,EAAE;IACdC,aAAa,EAAE,UAAU;IACzBC,iBAAiB,EAAE,IAAI;IACvBC,uBAAuB,EAAE,aAAa;IACtCC,uBAAuB,EAAE;EAC7B,CAAC;EACDC,eAAe,EAAE;IACbJ,aAAa,EAAE,SAAS;IACxBC,iBAAiB,EAAE,IAAI;IACvBC,uBAAuB,EAAE,aAAa;IACtCC,uBAAuB,EAAE;EAC7B,CAAC;EACDE,WAAW,EAAE;IACTrB,MAAM,EAAEd,cAAc;IACtBoC,eAAe,EACXzB,KAAK,CAACY,OAAO,CAACC,IAAI,KAAK,OAAO,GACxB,OAAOpB,mBAAmB,GAAG,GAC7B,OAAOD,kBAAkB,GAAG;IACtCwB,cAAc,EAAE/B,wBAAwB;IACxCgC,kBAAkB,EAAE,OAAO;IAC3B,CAACjB,KAAK,CAAC0B,WAAW,CAACC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG;MACrCX,cAAc,EAAEjC;IACpB;EACJ,CAAC;EACD6C,aAAa,EAAE;IACXzB,MAAM,EAAEd,cAAc;IACtB0B,KAAK,EAAE,MAAM;IACbU,eAAe,EACXzB,KAAK,CAACY,OAAO,CAACC,IAAI,KAAK,OAAO,GACxB,OAAOhB,oBAAoB,GAAG,GAC9B,OAAOD,mBAAmB,GAAG;IACvCoB,cAAc,EAAEhC,yBAAyB;IACzCiC,kBAAkB,EAAE,MAAM;IAC1BY,gBAAgB,EAAE;EACtB,CAAC;EACDC,YAAY,EAAE;IACV3B,MAAM,EAAEd,cAAc;IACtB0B,KAAK,EAAE,MAAM;IACbU,eAAe,EACXzB,KAAK,CAACY,OAAO,CAACC,IAAI,KAAK,OAAO,GACxB,OAAOlB,mBAAmB,GAAG,GAC7B,OAAOD,kBAAkB,GAAG;IACtCsB,cAAc,EAAEhC,yBAAyB;IACzCiC,kBAAkB,EAAE,OAAO;IAC3BY,gBAAgB,EAAE;EACtB,CAAC;EACDE,WAAW,EAAE;IACTC,QAAQ,EAAE,MAAM;IAChB7B,MAAM,EAAE,OAAO;IACf8B,MAAM,EAAE,QAAQ;IAChBlB,KAAK,EAAE,aAAa;IACpBmB,UAAU,EAAEhD,YAAY;IACxBiD,SAAS,EAAE,OAAO;IAClB7B,WAAW,EAAE,aAAa;IAC1B;IACA8B,QAAQ,EAAE,UAAU;IACpBC,KAAK,EAAE,SAAS;IAChBC,GAAG,EAAE,SAAS;IACd,WAAW,EAAE;MACTN,QAAQ,EAAE,MAAM;MAChBE,UAAU,EAAE5C;IAChB,CAAC;IACD,UAAU,EAAE;MACR0C,QAAQ,EAAE,MAAM;MAChBE,UAAU,EAAEhD,YAAY;MACxBqD,KAAK,EAAE,MAAM;MACbC,SAAS,EAAE,MAAM;MACjBC,YAAY,EAAE;IAClB,CAAC;IACD,aAAa,EAAE;MACXC,aAAa,EAAE,KAAK;MACpBC,OAAO,EAAE;IACb,CAAC;IACD,SAAS,EAAE;MACPC,KAAK,EAAE;IACX,CAAC;IACD,WAAW,EAAE;MACTJ,SAAS,EAAE,CAAC;MACZC,YAAY,EAAE,UAAU;MACxBT,QAAQ,EAAE,SAAS;MACnBE,UAAU,EAAE5C,iBAAiB;MAC7B8C,QAAQ,EAAE,UAAU;MACpBE,GAAG,EAAE,SAAS;MACdO,IAAI,EAAE,SAAS;MACfF,OAAO,EAAE;MACT;IACJ;EACJ;AACJ,CAAC,CAAC;AAEN,SAASG,WAAWA,CAAC;EAAEC;AAAqB,CAAC,EAAE;EAC3C,oBACIrE,KAAA,CAAAsE,aAAA,CAAAtE,KAAA,CAAAuE,QAAA,QACKF,IAAI,CAACG,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,kBAClB1E,KAAA,CAAAsE,aAAA,CAACK,WAAW;IAACC,GAAG,EAAEF,KAAM;IAACD,IAAI,EAAEA,IAAK;IAAAI,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACzC,CACH,CAAC;AAEX;AAEA,SAASP,WAAWA,CAAC;EAAEF;AAAqB,CAAC,EAAE;EAC3C,oBACIzE,KAAA,CAAAsE,aAAA,CAAAtE,KAAA,CAAAuE,QAAA,qBACIvE,KAAA,CAAAsE,aAAA,CAACa,UAAU;IACPP,GAAG,EAAC,QAAQ;IACZxC,KAAK,EAAEqC,IAAI,CAACrC,KAAM;IAClBgD,QAAQ,EAAEX,IAAI,CAACW,QAAS;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC3B,CAAC,EACDT,IAAI,CAACY,IAAI,CAACC,KAAK,CAAC,MAAM,CAAC,CAACd,GAAG,CAAC,CAACa,IAAI,EAAEX,KAAK,kBACrC1E,KAAA,CAAAsE,aAAA,CAACiB,QAAQ;IAACX,GAAG,EAAEF,KAAM;IAACW,IAAI,EAAEA,IAAK;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACtC,CACH,CAAC;AAEX;AAEA,SAASC,UAAUA,CAAC;EAAE/C,KAAK;EAAEgD;AAA8C,CAAC,EAAE;EAC1E,MAAMI,aAAa,GAAGpE,oBAAoB,CAACgB,KAAK,EAAEgD,QAAQ,CAAC;EAC3D,oBACIpF,KAAA,CAAAsE,aAAA;IAAKmB,SAAS,EAAC,QAAQ;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnBlF,KAAA,CAAAsE,aAAA;IAAMM,GAAG,EAAC,OAAO;IAACa,SAAS,EAAC,OAAO;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC9B9C,KACC,CAAC,EACNoD,aAAa,CAAChB,GAAG,CAAC,CAACY,QAAQ,EAAEV,KAAK,kBAC/B1E,KAAA,CAAAsE,aAAA;IAAMM,GAAG,EAAE,YAAYF,KAAK,EAAG;IAACe,SAAS,EAAC,UAAU;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC/CE,QACC,CACT,CACA,CAAC;AAEd;AAEA,SAASG,QAAQA,CAAC;EAAEF;AAAuB,CAAC,EAAE;EAC1C,MAAMK,WAAW,GAAGL,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACK,MAAM,CAAElB,IAAI,IAAKA,IAAI,KAAK,EAAE,CAAC;EACjE,MAAMmB,UAAU,GAAG,EAAE;EAErB,KAAK,MAAMlB,KAAK,IAAIgB,WAAW,EAAE;IAC7BE,UAAU,CAACC,IAAI,CAACH,WAAW,CAAChB,KAAK,CAAC,eAAE1E,KAAA,CAAAsE,aAAA,CAACwB,MAAM;MAAClB,GAAG,EAAEF,KAAM;MAAAG,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAC,CAAC;EAC/D;EAEA,IAAI,CAACG,IAAI,CAACU,QAAQ,CAAC,GAAG,CAAC,EAAE;IACrBH,UAAU,CAACI,GAAG,CAAC,CAAC;EACpB;EAEA,oBAAOhG,KAAA,CAAAsE,aAAA;IAAKmB,SAAS,EAAC,MAAM;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAEU,UAAgB,CAAC;AACnD;AAEA,SAASE,MAAMA,CAAA,EAAG;EACd,oBAAO9F,KAAA,CAAAsE,aAAA;IAAMmB,SAAS,EAAC,QAAQ;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAAO,CAAC;AAC5C;AAEA,SAASe,eAAeA,CAAA,EAAG;EACvB,MAAMC,YAAY,GAAGC,MAAM,CACtBC,gBAAgB,CAACC,QAAQ,CAAChB,IAAI,CAAC,CAC/BiB,gBAAgB,CAAC,WAAW,CAAC;EAClC,MAAMC,mBAAmB,GAAGC,MAAM,CAACN,YAAY,CAACO,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAC7D,OAAOF,mBAAmB;AAC9B;AAeA,MAAMG,OAAO,SAAS1G,KAAK,CAAC2G,SAAS,CAAe;EAGhDC,WAAWA,CAACC,KAAY,EAAE;IACtB,KAAK,CAACA,KAAK,CAAC;IAAC,KAHjBC,WAAW;IAIP,IAAI,CAACC,KAAK,GAAG;MACTC,KAAK,EAAE;IACX,CAAC;EACL;EAEAC,iBAAiBA,CAAA,EAAG;IAChB,MAAMC,UAAU,GAAGrG,cAAc,CAAC,IAAI,CAACgG,KAAK,CAACM,IAAI,CAAC,CAACD,UAAU;IAC7D,IAAI,CAACL,KAAK,CAACO,YAAY,CAACF,UAAU,EAAE,IAAI,CAACL,KAAK,CAACQ,OAAO,CAAC;IACvD,IAAI,CAACP,WAAW,GAAGQ,SAAS;IAC5B,IAAI,CAACC,QAAQ,CAAC;MAAEP,KAAK,EAAE;IAAE,CAAC,CAAC;EAC/B;EAEAQ,MAAMA,CAAA,EAAG;IACL,MAAM;MAAEC,OAAO;MAAEC,KAAK;MAAEC,KAAK;MAAER;IAAK,CAAC,GAAG,IAAI,CAACN,KAAK;IAElD,MAAMe,gBAAgB,GAAG,IAAI,CAACf,KAAK,CAACvF,KAAK,CAACY,OAAO,CAACC,IAAI;IAEtD,IAAIuF,KAAK,CAACG,MAAM,KAAK,CAAC,EAAE;MACpB,oBACI7H,KAAA,CAAAsE,aAAA;QACIM,GAAG,EAAEuC,IAAK;QACV1B,SAAS,EAAEgC,OAAO,CAACrF,KAAM;QACzB0F,KAAK,EAAE;UACH/E,eAAe,EACX6E,gBAAgB,KAAK,OAAO,GACtB,OAAO/G,cAAc,CAACsG,IAAI,CAAC,CAACY,eAAe,GAAG,GAC9C,OAAOlH,cAAc,CAACsG,IAAI,CAAC,CAACa,cAAc;QACxD,CAAE;QAAAnD,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,CACL,CAAC;IAEV;;IAEA;IACA,IAAI,IAAI,CAAC6B,KAAK,CAACC,KAAK,KAAK,CAAC,EAAE;MACxB,IAAI,IAAI,CAACF,WAAW,KAAKQ,SAAS,EAAE;QAChC,IAAI,CAACR,WAAW,GAAGmB,UAAU,CAAC,MAAM;UAChC,IAAI,CAACnB,WAAW,IAAIoB,YAAY,CAAC,IAAI,CAACpB,WAAW,CAAC;UAClD,IAAI,CAACA,WAAW,GAAGQ,SAAS;UAC5B,IAAI,CAACC,QAAQ,CAAC;YAAEP,KAAK,EAAE;UAAE,CAAC,CAAC;QAC/B,CAAC,EAAE,IAAI,CAAC;MACZ;MAEA,oBACIhH,KAAA,CAAAsE,aAAA;QACIM,GAAG,EAAEuC,IAAK;QACV1B,SAAS,EAAE1F,IAAI,CAAC0H,OAAO,CAACrF,KAAK,EAAEqF,OAAO,CAACjF,gBAAgB,CAAE;QACzDsF,KAAK,EAAE;UACH/E,eAAe,EACX6E,gBAAgB,KAAK,OAAO,GACtB,OAAO/G,cAAc,CAACsG,IAAI,CAAC,CAACY,eAAe,GAAG,GAC9C,OAAOlH,cAAc,CAACsG,IAAI,CAAC,CAACa,cAAc;QACxD,CAAE;QAAAnD,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,CACL,CAAC;IAEV;IAEA,oBACIlF,KAAA,CAAAsE,aAAA;MAAKmB,SAAS,EAAE1F,IAAI,CAAC0H,OAAO,CAACjG,SAAS,EAAEiG,OAAO,CAAC5E,eAAe,CAAE;MAAAgC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBAC7DlF,KAAA,CAAAsE,aAAA;MAAKmB,SAAS,EAAEgC,OAAO,CAACvE,aAAc;MAAA2B,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAM,CAAC,eAC7ClF,KAAA,CAAAsE,aAAA;MAAKmB,SAAS,EAAEgC,OAAO,CAAC3E,WAAY;MAAA+B,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBAChClF,KAAA,CAAAsE,aAAA,CAACrE,mBAAmB;MAACkI,WAAW;MAACC,YAAY;MAAAvD,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACxC,CAAC;MAAE7C;IAAyB,CAAC,KAAK;MAC/B,MAAMkE,mBAAmB,GAAGN,eAAe,CAAC,CAAC;MAE7C,MAAMoC,kBAAkB,GAAGC,IAAI,CAACC,KAAK,CACjChC,mBAAmB,GAAG9F,mBAC1B,CAAC;MAED,MAAM+H,sBAAsB,GACxBH,kBAAkB,GAAG3H,qBAAqB;MAE9C,oBACIV,KAAA,CAAAsE,aAAA,CAAAtE,KAAA,CAAAuE,QAAA,QACKoD,KAAK,CAACnD,GAAG,CAAC,CAACH,IAAI,EAAEK,KAAK,kBACnB1E,KAAA,CAAAsE,aAAA;QACIM,GAAG,EAAEF,KAAM;QACXe,SAAS,EAAEgC,OAAO,CAACpE,WAAY;QAC/ByE,KAAK,EAAE;UACHzF,KAAK,EAAE,GAAGmG,sBAAsB;QACpC,CAAE;QAAA3D,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,gBAEFlF,KAAA,CAAAsE,aAAA,CAACF,WAAW;QAACC,IAAI,EAAEA,IAAK;QAAAQ,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,CAAE,CACzB,CACR,CACH,CAAC;IAEX,CACiB,CACpB,CAAC,eACNlF,KAAA,CAAAsE,aAAA;MAAKmB,SAAS,EAAEgC,OAAO,CAACrE,YAAa;MAAAyB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAM,CAC1C,CAAC;EAEd;AACJ;AAEA,eAAe9E,SAAS,CAACD,UAAU,CAACkB,MAAM,CAAC,CAACqF,OAAO,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}