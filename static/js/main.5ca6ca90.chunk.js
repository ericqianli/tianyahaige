(this.webpackJsonptianyahaige=this.webpackJsonptianyahaige||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);a(96);var n,i,r=a(0),o=a.n(r),c=a(6),l=a.n(c),s=a(46),m=a(32),u=a(50),d=a(11),p=(a(101),a(102),a(103),a(4)),g=a(44),h=a(22),f=a(65),b=a.n(f),y=a(157),k=a(158),E=a(159),v=a(160),_=a(161),x=a(163),S=a(162),O=a(87),w=a.n(O),N=a(24),T=a(66),C=a.n(T),j=a(67),I=a.n(j),R=a(68),z=a.n(R),B=a(69),M=a.n(B),P=a(70),A=a.n(P),H=a(71),L=a.n(H),D=a(72),Q=a.n(D),W=a(73),q=a.n(W),V={content:{type:N.QueryType.MYSQL}},F="".concat(114,"rem ").concat(48,"rem"),K="1344px ".concat(48,"rem"),U="auto ".concat(48,"rem"),Y=(n={},Object(d.a)(n,"/",{key:"all",sql:"select * from poem_by_date",title:"\u5929\u6daf\u6d77\u69ce",backgroundLight:I.a,backgroundDark:C.a}),Object(d.a)(n,"/fallen_star",{key:"fallen_star",sql:"select * from poem_by_date where fallen_star=true",title:"\u843d\u661f\u96c6",backgroundLight:M.a,backgroundDark:z.a}),Object(d.a)(n,"/india_travel",{key:"india_travel",sql:"select * from poem_by_date where india_travel=true",title:"\u5929\u7afa\u6563\u8a18",backgroundLight:L.a,backgroundDark:A.a}),Object(d.a)(n,"/immortals",{key:"immortals",sql:"select * from poem_by_date limit 30, 40",title:"\u5217\u4ed9\u96c6",backgroundLight:q.a,backgroundDark:Q.a}),n),Z=a(26),$=a.n(Z),G=a(38);function J(e){return{type:i.RECEIVE_CONTENT,content:e}}!function(e){e.REQUEST_CONTENT="REQUEST_CONTENT",e.RECEIVE_CONTENT="RECEIVE_CONTENT",e.RECEIVE_CONTENT_ERROR="RECEIVE_CONTENT_ERROR"}(i||(i={}));var X=a(74),ee=a(75),te=a(92),ae=a(91),ne=a(90),ie=a(164),re=a(165),oe=a(7),ce=a(76),le=a.n(ce),se=a(77),me=a.n(se),ue=a(78),de=a.n(ue),pe=a(79),ge=a.n(pe),he=a(80),fe=a.n(he),be=a(81),ye=a.n(be);function ke(e){var t=e.poems;return o.a.createElement(o.a.Fragment,null,t.map((function(e){return o.a.createElement(Ee,{key:e.id,poem:e})})))}function Ee(e){var t=e.poem;return o.a.createElement("div",{id:t.id},o.a.createElement(ve,{key:"header",title:t.title,subtitle:t.subtitle}),t.body.split("\r\n").map((function(e,t){return o.a.createElement(_e,{key:t,body:e})})))}function ve(e){var t=e.title,a=function(e,t){if(/^[A-Za-z0-9]/.test(t))return t.split("\r\n");var a=t.length;if(a<=4)return[t];for(var n=2*(40-2*e.length-5);a>n;)a-=n,n=80;var i=a>>>1;return[t.slice(0,-i),t.slice(-i)]}(t,e.subtitle);return o.a.createElement("div",{className:"header"},o.a.createElement("span",{key:"title",className:"title"},t),a.map((function(e,t){return o.a.createElement("span",{key:"subtitle_".concat(t),className:"subtitle"},e)})))}function _e(e){var t=e.body.split("\ufe12").filter((function(e){return""!==e})),a=[];for(var n in t)a.push(t[n],o.a.createElement(xe,{key:n}));return o.a.createElement("div",{className:"body"},a)}function xe(){return o.a.createElement("span",{className:"period"},"\ufe12")}var Se=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).numPages=0,n.fadeTimeout=void 0,n.state={stage:0},n}return Object(ee.a)(a,[{key:"componentDidMount",value:function(){var e=Y[this.props.path].sql;this.props.fetchContent(e),this.numPages=0,this.fadeTimeout=void 0,this.setState({stage:1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.poems,i=t.path,r=this.props.theme.palette.type;return 0===n.length?o.a.createElement("div",{key:i,className:a.title,style:{backgroundImage:"url(".concat("light"===r?Y[i].backgroundLight:Y[i].backgroundDark,")")}}):1===this.state.stage?(void 0===this.fadeTimeout&&(this.fadeTimeout=setTimeout((function(){e.fadeTimeout&&clearTimeout(e.fadeTimeout),e.fadeTimeout=void 0,e.setState({stage:2})}),2e3)),o.a.createElement("div",{key:i,className:Object(p.a)(a.title,a.fadeOutAnimation),style:{backgroundImage:"url(".concat("light"===r?Y[i].backgroundLight:Y[i].backgroundDark,")")}})):o.a.createElement("div",{className:Object(p.a)(a.container,a.fadeInAnimation)},o.a.createElement("div",{className:a.bookRightSide}),o.a.createElement("div",{className:a.bookContent},o.a.createElement(ne.a,{handleWidth:!0,handleHeight:!0},(function(t){var n=t.width,i=function(){var e=window.getComputedStyle(document.body).getPropertyValue("font-size");return Number(e.slice(0,-2))}(),r=48*Math.floor(2.375*i);0===e.numPages&&!isNaN(n)&&n>0&&(e.numPages=Math.ceil(n/r));var c=r*e.numPages;return o.a.createElement("div",{className:a.poemContent,style:{width:0===c?"fit-content":"".concat(c,"px")}},o.a.createElement(ke,{poems:e.props.poems}))}))),o.a.createElement("div",{className:a.bookLeftSide}))}}]),a}(o.a.Component),Oe=Object(re.a)(Object(oe.a)((function(e){return Object(ie.a)({"@keyframes fadeOut":{"0%":{opacity:1},"40%":{opacity:1},"100%":{opacity:0}},"@keyframes fadeIn":{"0%":{opacity:0},"100%":{opacity:1}},container:{height:"44rem",overflowX:"auto",overflowY:"hidden",writingMode:"vertical-rl","&::-webkit-scrollbar":{height:"1rem"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{border:".25rem solid rgba(0, 0, 0, 0)",borderRadius:".5rem",backgroundClip:"padding-box",backgroundColor:"transparent"},"&:hover::-webkit-scrollbar-thumb":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, .25)":"rgba(255, 255, 255, .25)"}},title:{height:"44rem",width:"32rem",backgroundSize:U,backgroundPosition:"center"},fadeOutAnimation:{animationName:"$fadeOut",animationDuration:"2s",animationTimingFunction:"ease-in-out",animationIterationCount:1},fadeInAnimation:{animationName:"$fadeIn",animationDuration:"2s",animationTimingFunction:"ease-in-out",animationIterationCount:1},bookContent:Object(d.a)({height:"44rem",backgroundImage:"light"===e.palette.type?"url(".concat(me.a,")"):"url(".concat(le.a,")"),backgroundSize:F,backgroundPosition:"right"},e.breakpoints.between("sm","md"),{backgroundSize:K}),bookRightSide:{height:"44rem",width:"5rem",backgroundImage:"light"===e.palette.type?"url(".concat(ye.a,")"):"url(".concat(fe.a,")"),backgroundSize:U,backgroundPosition:"left",backgroundRepeat:"no-repeat"},bookLeftSide:{height:"44rem",width:"5rem",backgroundImage:"light"===e.palette.type?"url(".concat(ge.a,")"):"url(".concat(de.a,")"),backgroundSize:U,backgroundPosition:"right",backgroundRepeat:"no-repeat"},poemContent:{fontSize:"2rem",height:"40rem",margin:"2rem 0",width:"fit-content",lineHeight:"2.375rem",textAlign:"start",writingMode:"vertical-rl",position:"relative",right:"-1.1rem",top:"-0.1rem","& .header":{fontSize:"1rem",lineHeight:"1.1875rem"},"& .title":{fontSize:"2rem",lineHeight:"2.375rem",float:"left",marginTop:"4rem",marginBottom:"1rem"},"& .subtitle":{verticalAlign:"top",display:"block"},"& .body":{clear:"both"},"& .period":{marginTop:0,marginBottom:"-0.75rem",fontSize:"0.75rem",lineHeight:"1.1875rem",position:"relative",top:"-0.2rem",left:"0.75rem",display:"none"}}})}))(Se)),we={type:N.QueryType.MYSQL,url:"https://datasweetdata.com:3030/mysql",id:"default_mysql",name:"MySql Playground"};function Ne(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(G.a)($.a.mark((function e(t){var a,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={type:N.QueryType.MYSQL,source:we,database:"poem",table:"poem",sql:t},e.next=4,Object(N.fetchQueryResultPromise)(a);case 4:return n=e.sent,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Ce=a(43);var je=Object(Ce.a)([function(e){return e.contentState}],(function(e){return(e.content.rows||[]).map((function(e){return{id:e.id,title:e.title||"",subtitle:e.subtitle||"",body:e.camera_ready_content||""}}))}));var Ie=Object(g.b)((function(e,t){return{poems:je(e),path:t.location.pathname}}),(function(e){return{fetchContent:function(){var t=Object(G.a)($.a.mark((function t(a){var n;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:i.REQUEST_CONTENT}),t.prev=1,t.next=4,Ne(a);case 4:n=t.sent,e(J(n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e((r=t.t0,{type:i.RECEIVE_CONTENT_ERROR,error:r}));case 11:case"end":return t.stop()}var r}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}))(Oe),Re=a(89),ze=function(e){return Object(Re.a)({props:{MuiButtonBase:{disableRipple:!0}},palette:{type:e},typography:{fontFamily:["Zi Yue Song Ke Ben","Adobe Kaiti Std","KaiTi_GB2312","KaiTi","STKaiti","SimSun","STFangsong","STSong","Arial Unicode MS"].join(","),h1:{fontWeight:700},h2:{fontWeight:700},h3:{fontSize:"2rem",lineHeight:1,writingMode:"vertical-rl"},h4:{fontWeight:500},h5:{fontSize:"1.25rem",fontWeight:500,lineHeight:1.6},h6:{fontSize:"1rem",fontWeight:500,lineHeight:1.6},body1:{fontSize:"2rem",lineHeight:2,writingMode:"vertical-rl"},body2:{fontSize:"1.5rem"},subtitle1:{fontSize:"1rem"},subtitle2:{fontSize:"2rem",lineHeight:"1ex",fontFamily:"'Libre Barcode 39 Extended'"}}})},Be=(ze("dark"),Object(Ce.a)([function(e){return e.themePaletteType}],ze)),Me=a(37);var Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.REQUEST_CONTENT:e=V;break;case i.RECEIVE_CONTENT:e=Object(m.a)({},e,{content:t.content});break;case i.RECEIVE_CONTENT_ERROR:}return e};var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{contentState:Pe(e.contentState,t)}},He=Object(Me.b)(Ae);b.a.load({custom:{families:["Zi Yue Song Ke Ben","Adobe Kaiti Std"],urls:["/fonts.css"]}});var Le=Object(y.a)((function(e){var t;return{"@global":{html:(t={boxSizing:"border-box"},Object(d.a)(t,e.breakpoints.up("xs"),{fontSize:8}),Object(d.a)(t,e.breakpoints.up("sm"),{fontSize:12}),Object(d.a)(t,e.breakpoints.up("lg"),{fontSize:16}),Object(d.a)(t,e.breakpoints.up("xl"),{fontSize:24}),t),body:{fontSize:"1rem"}},root:{flexGrow:1},grid:{minHeight:"100vh"},header:{flexBasis:"calc(50vh - 18rem)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},main:{flexBasis:"44rem",display:"flex",alignItems:"center",justifyContent:"center"},footer:{flexBasis:"calc(50vh - 26rem)"},drawerContent:{height:"calc(50vh - 17.5rem)",minHeight:"9.625rem",display:"flex",justifyContent:"center",alignItems:"center"},menuItems:{listStyle:"none",margin:0,padding:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",writingMode:"vertical-rl","& li":{margin:"0 1rem"}},menuItem:{cursor:"pointer"},list:{width:250},fullList:{width:"auto"},menuButton:{margin:e.spacing(1),padding:e.spacing(.5),borderRadius:e.spacing(.5)},hide:{visibility:"hidden"},symbolIcon:{fontFamily:"Arial Unicode MS"},symbolWrapper:{width:"1em",height:"1em",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"1em",position:"relative",top:"-1px"}}}));var De=Object(h.e)((function(e){var t=Le(),a=o.a.useState({drawerShown:!1,themePaletteType:"dark"}),n=Object(u.a)(a,2),i=n[0],r=n[1],c=function(e){return function(){console.log("toggleDrawerOnMouseClick"),r(Object(m.a)({},i,{drawerShown:e}))}},l=o.a.createElement("div",{className:t.drawerContent,role:"presentation",onClick:c(!1)},o.a.createElement("ul",{className:t.menuItems},Object.entries(Y).map((function(a){var n=Object(u.a)(a,2),i=n[0],r=n[1];return o.a.createElement("li",{key:i},o.a.createElement(k.a,{className:t.menuItem,variant:"h3",align:"center",onClick:function(){e.history.push(i)}},r.title))}))));return o.a.createElement(g.a,{store:He},o.a.createElement(E.a,{theme:Be(i)},o.a.createElement(v.a,null),o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"AppBody"},o.a.createElement(_.a,{className:t.grid,container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},o.a.createElement(_.a,{className:t.header,item:!0,xs:12},o.a.createElement(x.a,{color:"inherit","aria-label":"open drawer",onClick:c(!0),className:Object(p.a)(t.menuButton,i.drawerShown&&t.hide)},o.a.createElement(w.a,{fontSize:"default"})),o.a.createElement(x.a,{color:"inherit","aria-label":"toggle light/dark mode",onClick:function(){r(Object(m.a)({},i,{themePaletteType:"light"===i.themePaletteType?"dark":"light"}))},className:Object(p.a)(t.menuButton,t.symbolIcon,i.drawerShown&&t.hide)},o.a.createElement("div",{className:t.symbolWrapper},o.a.createElement("span",null,"\u262f"))),o.a.createElement(S.a,{anchor:"top",open:i.drawerShown,onClose:c(!1)},l)),o.a.createElement(_.a,{className:t.main,item:!0,xs:12},Object.keys(Y).map((function(e){return o.a.createElement(h.a,{key:e,exact:!0,path:e,component:Ie})}))),o.a.createElement(_.a,{className:t.footer,item:!0,xs:12}))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,null,o.a.createElement(De,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},66:function(e,t,a){e.exports=a.p+"static/media/title1_2x_dark.b69d0cf4.png"},67:function(e,t,a){e.exports=a.p+"static/media/title1_2x_light.b5e7b117.png"},68:function(e,t,a){e.exports=a.p+"static/media/title2_2x_dark.b84e2803.png"},69:function(e,t,a){e.exports=a.p+"static/media/title2_2x_light.cd597e79.png"},70:function(e,t,a){e.exports=a.p+"static/media/title3_2x_dark.929ff401.png"},71:function(e,t,a){e.exports=a.p+"static/media/title3_2x_light.4605a86b.png"},72:function(e,t,a){e.exports=a.p+"static/media/title4_2x_dark.45eb61d8.png"},73:function(e,t,a){e.exports=a.p+"static/media/title4_2x_light.cbbfd6c3.png"},76:function(e,t,a){e.exports=a.p+"static/media/background_body_2x_dark.f2dfa26a.png"},77:function(e,t,a){e.exports=a.p+"static/media/background_body_2x_light.8a99a93d.png"},78:function(e,t,a){e.exports=a.p+"static/media/background_left_2x_dark.d95f3dc0.png"},79:function(e,t,a){e.exports=a.p+"static/media/background_left_2x_light.840e42e3.png"},80:function(e,t,a){e.exports=a.p+"static/media/background_right_2x_dark.861ac0ec.png"},81:function(e,t,a){e.exports=a.p+"static/media/background_right_2x_light.a3e3df0d.png"},95:function(e,t,a){e.exports=a(132)},96:function(e,t,a){}},[[95,1,2]]]);
//# sourceMappingURL=main.5ca6ca90.chunk.js.map